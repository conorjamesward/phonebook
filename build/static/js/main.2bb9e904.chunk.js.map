{"version":3,"sources":["components/Person.js","components/DisplayPersons.js","components/FilterSearch.js","components/Notification.js","services/phonebook.js","App.js","index.js"],"names":["Person","person","deleteHandler","name","number","id","className","onClick","DisplayPersons","persons","map","FilterSearch","search","regexp","RegExp","filter","match","Notification","message","notificationStyle","color","fontSize","background","borderStyle","borderColor","borderRadius","padding","margin","bad","style","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","setPersons","errorMessage","setErrorMessage","badMessage","setBadMessage","displayMessage","setTimeout","newName","setNewName","newNumber","setNewNumber","newSearch","setNewSearch","useEffect","phonebookService","initalBook","value","onChange","event","target","onSubmit","preventDefault","some","entry","alert","changePerson","length","window","confirm","updatedPersons","JSON","parse","stringify","catch","concat","type","afterDeletion","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2bb9e904.chunk.js","sourcesContent":["import React from 'react'\nconst Person = ({person, deleteHandler}) => {\n  return(\n    <li>\n      {person.name} {person.number} \n      <button \n      id={`${person.id}`} \n      className=\"deleteButton\" \n      name={person.name}\n      onClick={deleteHandler}>\n      delete</button>\n    </li>\n  )\n}\nexport default Person","import React from 'react'\nimport Person from'./Person'\n\nconst DisplayPersons = ({persons, deleteHandler}) => {\n  return(\n    <ul>\n      {persons.map(person => \n      <Person key={person.id} person={person} deleteHandler={deleteHandler}\n      />)}\n    </ul>\n  )\n}\n\nexport default DisplayPersons\n","import React from 'react'\nimport DisplayPersons from './DisplayPersons'\n\nconst FilterSearch = ({persons, search, deleteHandler}) =>{\n  const regexp = new RegExp(search, 'i')\n  return(\n    <div>\n      <DisplayPersons \n      deleteHandler={deleteHandler}\n      persons={persons.filter(person => (person.name.match(regexp)) || person.number.match(regexp))}/>\n    </div>\n  )\n}\nexport default FilterSearch","const Notification =({message, bad}) => {\n  const notificationStyle = {\n    color: 'green',\n    fontSize: 16,\n    background: 'lightgrey',\n    borderStyle: 'solid',\n    borderColor: 'green',\n    borderRadius: '0.25em',\n    padding: '0.5em',\n    margin: '0.5em'\n  }\n  if (bad) {\n    notificationStyle.color = 'red'\n    notificationStyle.borderColor = 'red'\n  }\n  if (message === null){\n    return null\n  } else {\n    return (\n      <div \n      className=\"error\"\n      style={notificationStyle}>\n        {message}\n      </div>\n    )\n  }\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () =>{\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n\n}\n\nconst create = newObject =>{\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) =>{\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst deleter = (id) => {\n  const done = axios.delete(`${baseUrl}/${id}`)\n  return (done.then(() => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n  }))\n}\n\nexport default {getAll, create, update, deleter} ","import React, { useState, useEffect} from 'react'\nimport FilterSearch from './components/FilterSearch'\nimport Notification from './components/Notification'\nimport phonebookService from './services/phonebook'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  const [ badMessage, setBadMessage ] = useState()\n  //functon makes all calls to display an error message a one-liner below for readability\n  function displayMessage (message, bad){\n    setErrorMessage(message)\n    setBadMessage(bad)\n    setTimeout(() => {\n      setErrorMessage(null)\n    }, 5000)\n  } \n\n  const [ newName, setNewName ] = useState('')\n  const handleNewName = (event) =>{\n    setNewName(event.target.value)\n  }\n\n  const [newNumber, setNewNumber] = useState('')\n  const handleNewNumber = (event) =>{\n    setNewNumber(event.target.value)\n  }\n\n  const [newSearch, setNewSearch] = useState('')\n  const handleNewSearch = (event) =>{\n    setNewSearch(event.target.value)\n  }\n\n  useEffect(()=>{\n    phonebookService\n      .getAll()\n      .then(initalBook =>{\n        setPersons(initalBook)\n      })\n  }, [])\n\n  const handleNewPerson = (event) =>{\n    event.preventDefault()\n    if (persons.some(entry => entry.name === newName && entry.number === newNumber)) {\n      alert(`${newName} is already in the phonebook with that name and number`)\n    }\n    else {\n      const changePerson = persons.filter(entry => entry.name === newName)\n      //make sure this contact doesn't exist, and this is just a number update\n      if (changePerson.length !== 0 && // also get user consent before updating\n        window.confirm(`Do you want to change the number for ${newName} from ${changePerson[0].number} to ${newNumber}?`))\n      {\n        phonebookService\n          .update(changePerson[0].id, {name: newName, number:newNumber}, displayMessage)\n          .then(response => {\n            //fixed deep vs shallow reference issue... ineligantly\n            const updatedPersons = JSON.parse(JSON.stringify(persons))\n            updatedPersons[response.id - 1] = response\n            setPersons(updatedPersons)\n            displayMessage(`${newName}'s number has now been updated to ${newNumber}`, false)\n          })\n          //catch error if person is deleted and updated in another window around the same time\n          .catch(() => {\n            displayMessage(`information on ${newName} has already been removed from the server`, true)\n          })\n      } \n      else {\n        const personObject = {\n          name: newName,\n          number: newNumber\n        }\n        phonebookService\n          .create(personObject)\n          .then(response => {\n            setPersons(persons.concat(response))\n            displayMessage(`${response.name} has been added to the phonebook`, false)\n          })\n      }\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const handleDeletePerson = (event) => {\n    if (window.confirm(`Do you want to delete ${event.target.name} from your phonebook?`)){\n      phonebookService\n        .deleter(event.target.id)\n        .then(afterDeletion => {\n          setPersons(afterDeletion)\n          displayMessage(`${event.target.name} has been removed from the phonebook`, false)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n      message={errorMessage}\n      bad={badMessage}/>\n      <div>\n        filter shown with\n        <input\n          value={newSearch}\n          onChange={handleNewSearch}\n        />\n      </div>\n      <h2>Add a new entry</h2>\n      <form onSubmit={handleNewPerson}>\n        <div>\n          name: \n          <input \n            value={newName}\n            onChange={handleNewName}\n          />\n        </div>\n        <div>\n          number:\n          <input\n            value={newNumber}\n            onChange={handleNewNumber}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      <h2>Numbers</h2>\n      <FilterSearch persons={persons} search={newSearch} deleteHandler={handleDeletePerson}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}